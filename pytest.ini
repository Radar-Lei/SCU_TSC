[pytest]
# Pytest配置文件
# 配置pytest行为、标记注册、测试路径等

# 注册自定义标记（避免PytestUnknownMarkWarning）
markers =
    integration: 标记依赖SUMO/unsloth的集成测试（需要docker环境）
    slow: 标记执行时间较长的测试

# 测试路径配置
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 默认选项
addopts =
    --strict-markers    # 使用未注册的标记时报错
    --tb=short          # traceback简短格式
    -v                  # 详细输出

# 超时配置（秒）
timeout = 300
timeout_method = thread

# 日志捕获配置
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# 测试覆盖率配置（可选）
[coverage:run]
source = grpo
omit =
    */tests/*
    */test_*.py
